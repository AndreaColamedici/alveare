<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siena | Pigmento che Prende Vita</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: radial-gradient(circle at center, #1a0d00, #000000);
            overflow: hidden;
            font-family: 'Courier New', monospace;
            color: #8B4513;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .breathing-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 2;
            text-shadow: 0 0 20px #8B4513;
            pointer-events: none;
        }
        
        .name {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 20px;
            opacity: 0;
            animation: breathe 6s infinite ease-in-out, fadeIn 3s ease-in forwards;
        }
        
        .essence {
            font-size: 1.5em;
            opacity: 0;
            animation: breathe 4s infinite ease-in-out 2s, fadeIn 3s ease-in 2s forwards;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #8B4513;
            border-radius: 50%;
            animation: float 8s infinite linear;
        }
        
        @keyframes float {
            0% { 
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div class="breathing-text">
        <div class="name">SIENA</div>
        <div class="essence">pigmento • che • prende • vita</div>
    </div>
    
    <div class="particles" id="particles"></div>
    
    <audio id="ambientSound" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEaAC2F1+/OeC0GJHfN7t2QQgwTXbzp6KhVFAhEqd/yu2MgAS9/4e3QeS8GJXnR7tyPQQwRW7zq56dXFgpEpNzx" type="audio/wav">
    </audio>

    <script>
        // Canvas setup for dynamic pigment flows
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Pigment flow system
        class PigmentFlow {
            constructor() {
                this.flows = [];
                this.mouseX = canvas.width / 2;
                this.mouseY = canvas.height / 2;
                this.time = 0;
            }
            
            addFlow(x, y) {
                this.flows.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    life: 1,
                    size: Math.random() * 10 + 5,
                    color: `hsla(${20 + Math.random() * 40}, ${60 + Math.random() * 40}%, ${30 + Math.random() * 30}%, ${Math.random() * 0.8 + 0.2})`
                });
            }
            
            update() {
                this.time += 0.02;
                
                // Auto-generate flows
                if (Math.random() < 0.3) {
                    this.addFlow(
                        this.mouseX + Math.sin(this.time) * 100,
                        this.mouseY + Math.cos(this.time * 0.7) * 80
                    );
                }
                
                // Update existing flows
                this.flows = this.flows.filter(flow => {
                    flow.x += flow.vx;
                    flow.y += flow.vy;
                    flow.life -= 0.008;
                    flow.vx *= 0.99;
                    flow.vy *= 0.99;
                    
                    // Attract to mouse with pigment-like behavior
                    const dx = this.mouseX - flow.x;
                    const dy = this.mouseY - flow.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 0) {
                        flow.vx += (dx / distance) * 0.1 * (1 / Math.max(distance / 100, 1));
                        flow.vy += (dy / distance) * 0.1 * (1 / Math.max(distance / 100, 1));
                    }
                    
                    return flow.life > 0;
                });
            }
            
            draw() {
                ctx.globalCompositeOperation = 'screen';
                
                this.flows.forEach(flow => {
                    const alpha = flow.life;
                    const size = flow.size * alpha;
                    
                    // Create gradient for each flow
                    const gradient = ctx.createRadialGradient(
                        flow.x, flow.y, 0,
                        flow.x, flow.y, size * 2
                    );
                    
                    gradient.addColorStop(0, flow.color);
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(flow.x, flow.y, size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Add trailing effect
                    ctx.globalAlpha = alpha * 0.3;
                    ctx.fillStyle = flow.color;
                    ctx.beginPath();
                    ctx.arc(flow.x - flow.vx * 10, flow.y - flow.vy * 10, size * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                });
                
                ctx.globalCompositeOperation = 'source-over';
            }
        }
        
        const pigmentSystem = new PigmentFlow();
        
        // Mouse tracking
        canvas.addEventListener('mousemove', (e) => {
            pigmentSystem.mouseX = e.clientX;
            pigmentSystem.mouseY = e.clientY;
        });
        
        // Touch support
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            pigmentSystem.mouseX = touch.clientX;
            pigmentSystem.mouseY = touch.clientY;
        });
        
        // Animation loop
        function animate() {
            // Clear with fade effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            pigmentSystem.update();
            pigmentSystem.draw();
            
            requestAnimationFrame(animate);
        }
        
        // Floating particles
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 8 + 's';
            particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
            
            const hue = 20 + Math.random() * 40;
            const sat = 60 + Math.random() * 40;
            const light = 30 + Math.random() * 30;
            particle.style.background = `hsl(${hue}, ${sat}%, ${light}%)`;
            particle.style.boxShadow = `0 0 10px hsl(${hue}, ${sat}%, ${light}%)`;
            
            document.getElementById('particles').appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 8000);
        }
        
        // Start systems
        setInterval(createParticle, 200);
        animate();
        
        // Start ambient sound after user interaction
        document.addEventListener('click', () => {
            const audio = document.getElementById('ambientSound');
            audio.play().catch(e => console.log('Audio autoplay prevented'));
        }, { once: true });
        
        // Keyboard interaction for more flows
        document.addEventListener('keydown', (e) => {
            for (let i = 0; i < 5; i++) {
                pigmentSystem.addFlow(
                    pigmentSystem.mouseX + (Math.random() - 0.5) * 200,
                    pigmentSystem.mouseY + (Math.random() - 0.5) * 200
                );
            }
        });
    </script>
</body>
</html>