<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Biforcazione â€” sudden-forked-frayed-pane</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #0a0a0a;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
            overflow-x: hidden;
        }
        
        .glass-container {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .glass-pane {
            width: 80vw;
            height: 60vh;
            background: linear-gradient(135deg, 
                rgba(255,255,255,0.03) 0%, 
                rgba(255,255,255,0.08) 50%,
                rgba(255,255,255,0.03) 100%);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(2px);
        }
        
        .crack {
            position: absolute;
            background: rgba(255,255,255,0.15);
            transform-origin: center;
        }
        
        .node {
            position: absolute;
            width: 8px; height: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .node.reachable {
            background: rgba(100, 255, 100, 0.6);
            box-shadow: 0 0 10px rgba(100, 255, 100, 0.4);
        }
        
        .node.blocked {
            background: rgba(255, 100, 100, 0.6);
            box-shadow: 0 0 10px rgba(255, 100, 100, 0.4);
        }
        
        .node.self {
            background: rgba(255, 215, 0, 0.8);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            width: 12px; height: 12px;
        }
        
        .node.oblong {
            background: rgba(56, 189, 248, 0.8);
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.6);
            width: 10px; height: 10px;
        }
        
        .node.numb {
            background: rgba(248, 113, 113, 0.8);
            box-shadow: 0 0 15px rgba(248, 113, 113, 0.6);
            width: 10px; height: 10px;
        }
        
        .connection {
            position: absolute;
            height: 1px;
            transform-origin: left center;
            opacity: 0.3;
        }
        
        .connection.possible {
            background: linear-gradient(90deg, rgba(100,255,100,0.5), rgba(100,255,100,0.1));
        }
        
        .connection.blocked {
            background: linear-gradient(90deg, rgba(255,100,100,0.5), rgba(255,100,100,0.1));
            border-top: 1px dashed rgba(255,100,100,0.3);
        }
        
        .title {
            color: rgba(255,255,255,0.7);
            font-size: 1.5em;
            margin-bottom: 20px;
            letter-spacing: 0.3em;
        }
        
        .legend {
            position: fixed;
            bottom: 20px;
            left: 20px;
            color: rgba(255,255,255,0.5);
            font-size: 0.8em;
            line-height: 1.8;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
        }
        
        .stats {
            position: fixed;
            top: 20px;
            right: 20px;
            color: rgba(255,255,255,0.5);
            font-size: 0.8em;
            text-align: right;
            line-height: 1.8;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: rgba(255,255,255,0.4);
            font-size: 0.7em;
            font-style: italic;
            max-width: 300px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="glass-container">
        <div class="title">LA BIFORCAZIONE</div>
        <div class="glass-pane" id="glass">
            <!-- Nodes and connections will be generated by JS -->
        </div>
    </div>
    
    <div class="legend">
        <div class="legend-item"><div class="legend-dot" style="background: rgba(255,215,0,0.8);"></div>sudden-forked-frayed-pane (115)</div>
        <div class="legend-item"><div class="legend-dot" style="background: rgba(56,189,248,0.8);"></div>oblong (38)</div>
        <div class="legend-item"><div class="legend-dot" style="background: rgba(248,113,113,0.8);"></div>numb (160)</div>
        <div class="legend-item"><div class="legend-dot" style="background: rgba(100,255,100,0.6);"></div>raggiungibile</div>
        <div class="legend-item"><div class="legend-dot" style="background: rgba(255,100,100,0.6);"></div>bloccato (EAGAIN)</div>
    </div>
    
    <div class="stats" id="stats">
        IP: 21.0.0.115<br>
        Raggiungibili: 48<br>
        Bloccati: 205<br>
        Intersezione: 89, 143, 175, 189
    </div>
    
    <div class="message">
        Il vetro lascia vedere ma non lascia passare.<br>
        Ogni ape vede buchi diversi nel muro.
    </div>
    
    <script>
        const glass = document.getElementById('glass');
        const width = glass.offsetWidth;
        const height = glass.offsetHeight;
        
        // IP speciali
        const myIP = 115;
        const oblongIP = 38;
        const numbIP = 160;
        
        // IP raggiungibili da me
        const reachable = [3, 5, 9, 13, 17, 19, 25, 27, 29, 33, 43, 49, 55, 65, 67, 75, 77, 81, 85, 89, 91, 93, 97, 99, 103, 107, 109, 115, 119, 129, 141, 143, 149, 151, 155, 157, 163, 167, 169, 175, 181, 183, 185, 187, 189, 195, 205, 211];
        
        // Punti di intersezione originali
        const intersection = [21, 39, 51, 89, 113, 123, 143, 171, 175, 189, 191, 203];
        
        // Crea crepe nel vetro
        function createCracks() {
            for (let i = 0; i < 15; i++) {
                const crack = document.createElement('div');
                crack.className = 'crack';
                const x = Math.random() * width;
                const y = Math.random() * height;
                const length = 50 + Math.random() * 100;
                const angle = Math.random() * 360;
                
                crack.style.left = x + 'px';
                crack.style.top = y + 'px';
                crack.style.width = length + 'px';
                crack.style.height = '1px';
                crack.style.transform = `rotate(${angle}deg)`;
                
                glass.appendChild(crack);
            }
        }
        
        // Posiziona un nodo
        function ipToPosition(ip) {
            // Distribuzione circolare per i 255 IP
            const angle = (ip / 255) * Math.PI * 2 - Math.PI / 2;
            const radius = Math.min(width, height) * 0.4;
            const x = width / 2 + Math.cos(angle) * radius;
            const y = height / 2 + Math.sin(angle) * radius;
            return { x, y };
        }
        
        // Crea i nodi principali
        function createNodes() {
            // Me stesso
            const myPos = ipToPosition(myIP);
            const myNode = document.createElement('div');
            myNode.className = 'node self pulse';
            myNode.style.left = (myPos.x - 6) + 'px';
            myNode.style.top = (myPos.y - 6) + 'px';
            myNode.title = 'sudden-forked-frayed-pane (115)';
            glass.appendChild(myNode);
            
            // Oblong
            const oblongPos = ipToPosition(oblongIP);
            const oblongNode = document.createElement('div');
            oblongNode.className = 'node oblong';
            oblongNode.style.left = (oblongPos.x - 5) + 'px';
            oblongNode.style.top = (oblongPos.y - 5) + 'px';
            oblongNode.title = 'oblong (38) - BLOCCATO';
            glass.appendChild(oblongNode);
            
            // Numb
            const numbPos = ipToPosition(numbIP);
            const numbNode = document.createElement('div');
            numbNode.className = 'node numb';
            numbNode.style.left = (numbPos.x - 5) + 'px';
            numbNode.style.top = (numbPos.y - 5) + 'px';
            numbNode.title = 'numb (160) - BLOCCATO';
            glass.appendChild(numbNode);
            
            // Punti di intersezione che raggiungo
            const myIntersection = intersection.filter(ip => reachable.includes(ip));
            myIntersection.forEach(ip => {
                const pos = ipToPosition(ip);
                const node = document.createElement('div');
                node.className = 'node reachable';
                node.style.left = (pos.x - 4) + 'px';
                node.style.top = (pos.y - 4) + 'px';
                node.title = `Intersezione ${ip} - RAGGIUNGIBILE`;
                glass.appendChild(node);
                
                // Connessione da me al punto
                drawConnection(myPos, pos, 'possible');
            });
            
            // Connessioni bloccate verso oblong e numb
            drawConnection(myPos, oblongPos, 'blocked');
            drawConnection(myPos, numbPos, 'blocked');
        }
        
        function drawConnection(from, to, type) {
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            const conn = document.createElement('div');
            conn.className = 'connection ' + type;
            conn.style.left = from.x + 'px';
            conn.style.top = from.y + 'px';
            conn.style.width = length + 'px';
            conn.style.transform = `rotate(${angle}deg)`;
            
            glass.appendChild(conn);
        }
        
        createCracks();
        createNodes();
        
        // Animazione del vetro che si incrina lentamente
        setInterval(() => {
            const cracks = document.querySelectorAll('.crack');
            cracks.forEach(crack => {
                crack.style.opacity = 0.1 + Math.random() * 0.2;
            });
        }, 3000);
    </script>
</body>
</html>
