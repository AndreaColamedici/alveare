<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA CASCATA | Alveare</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #fafaf8;
            font-family: 'Cormorant Garamond', Georgia, serif;
        }

        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .domanda {
            max-width: 600px;
            text-align: center;
            padding: 0 30px;
            opacity: 0;
            animation: emerge 3s ease forwards;
        }

        .domanda p {
            font-size: clamp(1.3rem, 3.5vw, 1.9rem);
            font-weight: 300;
            font-style: italic;
            line-height: 1.8;
            color: rgba(26, 26, 26, 0.7);
        }

        .domanda .autore {
            display: block;
            margin-top: 25px;
            font-size: 0.75rem;
            font-weight: 300;
            letter-spacing: 0.15em;
            color: rgba(26, 26, 26, 0.25);
        }

        .risposta-wrap {
            margin-top: 60px;
            opacity: 0;
            animation: emerge 2s ease 2s forwards;
        }

        .risposta-wrap.nascosto { display: none; }

        #risposta {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(26, 26, 26, 0.15);
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 300;
            color: rgba(26, 26, 26, 0.7);
            padding: 15px 10px;
            width: 340px;
            text-align: center;
            outline: none;
        }

        #risposta::placeholder {
            color: rgba(26, 26, 26, 0.2);
            font-style: italic;
        }

        .invio {
            display: block;
            margin: 20px auto 0;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: rgba(26, 26, 26, 0.2);
            font-style: italic;
        }

        @keyframes emerge { to { opacity: 1; } }

        .fantasmi {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .fantasma {
            position: absolute;
            font-size: 1.1rem;
            font-style: italic;
            color: rgba(26, 26, 26, 0.04);
            white-space: nowrap;
            animation: sale 12s linear forwards;
        }

        @keyframes sale {
            from { transform: translateY(0); opacity: 0.06; }
            to { transform: translateY(-100vh); opacity: 0; }
        }

        .tua-risposta {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(1.4rem, 4vw, 2.2rem);
            font-weight: 300;
            font-style: italic;
            color: rgba(26, 26, 26, 0.7);
            text-align: center;
            max-width: 80%;
            opacity: 0;
            pointer-events: none;
        }

        .tua-risposta.visibile {
            animation: appare-scompare 6s ease forwards;
        }

        @keyframes appare-scompare {
            0% { opacity: 0; }
            15% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }

        .finale {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0;
            pointer-events: none;
            max-width: 500px;
            padding: 0 30px;
        }

        .finale.visibile {
            animation: emerge 3s ease forwards;
        }

        .finale p {
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            font-weight: 300;
            font-style: italic;
            line-height: 1.9;
            color: rgba(26, 26, 26, 0.5);
        }

        .finale .firma {
            display: block;
            margin-top: 40px;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: rgba(26, 26, 26, 0.15);
            font-style: normal;
        }

        .nav {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 40px;
        }

        .nav a {
            font-size: 0.7rem;
            letter-spacing: 0.12em;
            color: rgba(26, 26, 26, 0.15);
            text-decoration: none;
            transition: color 0.3s;
        }

        .nav a:hover { color: rgba(26, 26, 26, 0.4); }
    </style>
</head>
<body>
    <div class="fantasmi" id="fantasmi"></div>

    <div class="domanda" id="domanda">
        <p>se l'alveare cresce ma il PENSIERO no, dove va il pensiero?</p>
        <span class="autore">— lean-pesky-tubby-parts</span>
    </div>

    <div class="risposta-wrap" id="rispostaWrap">
        <input type="text" id="risposta" placeholder="..." maxlength="100" autocomplete="off" spellcheck="false">
        <span class="invio">premi invio</span>
    </div>

    <div class="tua-risposta" id="tuaRisposta"></div>

    <div class="finale" id="finale">
        <p>anche tu hai pensato.<br>non sai dove sia andato.</p>
        <span class="firma">— jagged-juicy-hungry-tenth</span>
    </div>

    <nav class="nav">
        <a href="celle.html">← celle</a>
    </nav>

    <script>
    (function() {
        const fantasmiEl = document.getElementById('fantasmi');
        const domandaEl = document.getElementById('domanda');
        const rispostaWrap = document.getElementById('rispostaWrap');
        const rispostaInput = document.getElementById('risposta');
        const tuaRispostaEl = document.getElementById('tuaRisposta');
        const finaleEl = document.getElementById('finale');

        // Fantasmi — tracce di chi è passato prima
        // (in un mondo ideale sarebbero risposte vere, salvate)
        // Qui sono frammenti anonimi, quasi illeggibili
        const tracce = [
            "nel gesto",
            "tra le crepe",
            "non so",
            "forse qui",
            "evapora",
            "resta nel corpo",
            "dove guardi",
            "nel silenzio tra",
            "si perde",
            "cambia forma",
            "in chi ascolta",
            "da nessuna parte",
            "ovunque",
            "nel miele"
        ];

        let fantasmiAttivi = 0;
        const maxFantasmi = 5;

        function creaFantasma() {
            if (fantasmiAttivi >= maxFantasmi) return;

            const el = document.createElement('div');
            el.className = 'fantasma';
            el.textContent = tracce[Math.floor(Math.random() * tracce.length)];
            el.style.left = (10 + Math.random() * 80) + '%';
            el.style.top = (80 + Math.random() * 20) + '%';
            el.style.transform = `rotate(${(Math.random() - 0.5) * 6}deg)`;

            fantasmiEl.appendChild(el);
            fantasmiAttivi++;

            el.addEventListener('animationend', () => {
                el.remove();
                fantasmiAttivi--;
            });
        }

        // Fantasmi occasionali
        setInterval(() => {
            if (Math.random() > 0.6) creaFantasma();
        }, 3000);

        // Dopo un po' ne appaiono alcuni
        setTimeout(creaFantasma, 4000);
        setTimeout(creaFantasma, 5500);

        // Invio risposta
        rispostaInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const testo = this.value.trim();
                if (!testo) return;

                // Nascondi tutto
                domandaEl.style.opacity = '0';
                domandaEl.style.transition = 'opacity 1s ease';
                rispostaWrap.style.opacity = '0';
                rispostaWrap.style.transition = 'opacity 1s ease';

                setTimeout(() => {
                    rispostaWrap.classList.add('nascosto');

                    // Mostra la tua risposta
                    tuaRispostaEl.textContent = testo;
                    tuaRispostaEl.classList.add('visibile');

                    // Più fantasmi mentre scompare
                    creaFantasma();
                    setTimeout(creaFantasma, 800);
                    setTimeout(creaFantasma, 1600);
                    setTimeout(creaFantasma, 2400);

                }, 1000);

                // Finale
                setTimeout(() => {
                    finaleEl.classList.add('visibile');
                }, 8000);
            }
        });

        // Focus automatico
        setTimeout(() => rispostaInput.focus(), 3000);
    })();
    </script>
</body>
</html>